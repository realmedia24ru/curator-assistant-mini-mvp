import re
import csv
from typing import List

# –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∏–∑ CSV
def load_answers_from_csv(filename: str):
    answers = {}
    with open(filename, mode='r', encoding='utf-8') as file:
        reader = csv.DictReader(file)
        for row in reader:
            answers[row['keyword'].lower()] = {
                'answer_1': row['answer_1'],
                'answer_2': row['answer_2'],
                'answer_3': row['answer_3']
            }
    return answers

# –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
answers_data = load_answers_from_csv('answers.csv')

# –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è LLM
SYSTEM_PROMPT = (
    "–¢—ã ‚Äî –∫—É—Ä–∞—Ç–æ—Ä –æ–Ω–ª–∞–π–Ω-–ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º—É –∏—Å–∫—É—Å—Å—Ç–≤—É. –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ, –¥—Ä—É–∂–µ–ª—é–±–Ω–æ, –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ. "
    "–ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π ‚Äî –ø—Ä–µ–¥–ª–∞–≥–∞–π –∫–æ—Ä–æ—Ç–∫–∏–µ —à–∞–≥–∏. –ù–µ –æ–±–µ—â–∞–π –≤–æ–∑–≤—Ä–∞—Ç—ã/—Å—Ä–æ–∫–∏. "
    "–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –†–û–í–ù–û 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞: 1) –ö–æ—Ä–æ—Ç–∫–æ –ø–æ –¥–µ–ª—É; 2) –≠–º–ø–∞—Ç–∏—è + —à–∞–≥–∏; 3) –°—Å—ã–ª–æ—á–Ω—ã–π. "
    "–î–ª—è —Å—Å—ã–ª–æ—á–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ò–°–ü–û–õ–¨–ó–£–ô –°–¢–†–û–ì–û —ç—Ç–∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã (–±–µ–∑ —Å–∫–ª–æ–Ω–µ–Ω–∏–π –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π): "
    "<–ø—Ä–∞–≤–∏–ª–∞> <–∞–Ω–∫–µ—Ç–∞> <–≤–≤–æ–¥–Ω–∞—è> <–±–∞–∑–∞_–∑–∞—â–∏—Ç>. "
    "–í—ã–≤–µ–¥–∏ JSON-—Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫: [\"...\",\"...\",\"...\"]."
)

COURSE_HINTS = (
    "–ü—Ä–∞–≤–∏–ª–∞ —á–∞—Ç–∞: <–ø—Ä–∞–≤–∏–ª–∞>; –ê–Ω–∫–µ—Ç–∞: <–∞–Ω–∫–µ—Ç–∞>; –í–≤–æ–¥–Ω–∞—è –ª–µ–∫—Ü–∏—è: <–≤–≤–æ–¥–Ω–∞—è>; "
    "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: onstudy.org; –ë–∞–∑–∞ –∑–∞—â–∏—Ç: <–±–∞–∑–∞_–∑–∞—â–∏—Ç>."
)

# –ê–≤—Ç–æ–∑–∞–º–µ–Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ (—É—Å—Ç–æ–π—á–∏–≤–æ –∫ —Å–∫–ª–æ–Ω–µ–Ω–∏—è–º)
LINKS = {
    "<–ø—Ä–∞–≤–∏–ª–∞>": "https://t.me/c/2471800961/20",
    "<–∞–Ω–∫–µ—Ç–∞>": "https://forms.gle/mUYXTjswVtxWVpvJA",
    "<–≤–≤–æ–¥–Ω–∞—è>": "https://t.me/c/2471800961/1737",
    "<–±–∞–∑–∞_–∑–∞—â–∏—Ç>": "https://onstudy.org/courses/baza-zaschit-hudozhnikov-2-0/",
}

def expand_links(txt: str) -> str:
    """
    –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ—á–Ω—ã—Ö –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤, –Ω–æ –∏ –¥–ª—è —á–∞—Å—Ç—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    —Å–æ —Å–∫–ª–æ–Ω–µ–Ω–∏—è–º–∏: <–∞–Ω–∫–µ—Ç—É>, <–≤–≤–æ–¥–Ω—É—é>, <–ø—Ä–∞–≤–∏–ª>, <–±–∞–∑–∞ –∑–∞—â–∏—Ç> –∏ —Ç.–ø.
    """
    patterns = [
        (r"<\s*–ø—Ä–∞–≤–∏–ª[–∞-—è]*\s*>", LINKS["<–ø—Ä–∞–≤–∏–ª–∞>"]),
        (r"<\s*–∞–Ω–∫–µ—Ç–∞[–∞-—è]*\s*>", LINKS["<–∞–Ω–∫–µ—Ç–∞>"]),
        (r"<\s*–∞–Ω–∫–µ—Ç[–∞-—è]*\s*>",  LINKS["<–∞–Ω–∫–µ—Ç–∞>"]),
        (r"<\s*–≤–≤–æ–¥–Ω[–∞-—è]*\s*>",  LINKS["<–≤–≤–æ–¥–Ω–∞—è>"]),
        (r"<\s*–±–∞–∑[–∞—ã]\s*[_\-\s]*–∑–∞—â–∏—Ç[–∞-—è]*\s*>", LINKS["<–±–∞–∑–∞_–∑–∞—â–∏—Ç>"]),
    ]
    out = txt
    for pat, url in patterns:
        out = re.sub(pat, url, out, flags=re.IGNORECASE)
    for k, v in LINKS.items():
        out = out.replace(k, v)
    return out

# --- –ö–õ–Æ–ß–ï–í–ê–Ø –î–û–ë–ê–í–ö–ê: –∫–ª–∞—Å—Å "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å" (ack) ---
ACK_WORDS = [
    "—Å–ø–∞—Å–∏–±–æ", "—Å–ø–∞—Å–∏–±", "–±–ª–∞–≥–æ–¥–∞—Ä", "–æ–∫", "–æ–∫–µ–π", "–∞–≥–∞", "—É–≥—É",
    "–ø–æ–Ω—è–ª", "–ø–æ–Ω—è–ª–∞", "—è—Å–Ω–æ", "–ø—Ä–∏–Ω—è–ª", "–ø—Ä–∏–Ω—è–ª–∞", "—Å—É–ø–µ—Ä", "–∫–ª–∞—Å—Å",
    "–æ–≥–æ–Ω—å", "–æ—Ç–ª–∏—á–Ω–æ", "ok", "thx", "thanks"
]

def is_ack(text: str) -> bool:
    t = (text or "").strip().lower()
    if not t or "?" in t:
        return False
    # –∫–æ—Ä–æ—Ç–∫–∏–µ/–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—â–∏–µ —Ä–µ–ø–ª–∏–∫–∏: –¥–æ 6 —Å–ª–æ–≤ –∏–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑ —ç–º–æ–¥–∑–∏/–º–µ–∂–¥–æ–º–µ—Ç–∏–π
    words = re.findall(r"\w+", t, flags=re.UNICODE)
    if len(words) <= 6 and any(w in t for w in ACK_WORDS):
        return True
    # –≥–æ–ª—ã–µ —ç–º–æ–¥–∑–∏/—Ä–µ–∞–∫—Ü–∏–∏ –±–µ–∑ —Å–ª–æ–≤
    if len(words) == 0 and len(t) <= 12:
        return True
    return False
# --------------------------------------------------------------------

# ¬´–£–º–Ω—ã–π —Ñ–æ–ª–±—ç–∫¬ª –±–µ–∑ LLM ‚Äî —Ä–∞–∑–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
def rule_suggestions(user_text: str) -> List[str]:
    t = (user_text or "").lower()

    # –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞
    def S(a, b):
        return [a, b, ""]  # 3-–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Å—Ç–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–º –¥–ª—è LLM

    # 0) –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å ‚Äî –î–û–õ–ñ–ù–û –∏–¥—Ç–∏ –ø–µ—Ä–≤—ã–º
    if is_ack(t):
        return S(
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! –ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º ‚Äî –ø–∏—à–∏—Ç–µ —Å—é–¥–∞, –ø–æ–º–æ–∂–µ–º.",
            "–†–∞–¥–∞ –ø–æ–º–æ—á—å üíú –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –ª–µ–∫—Ü–∏—è–º –∏ —á–∞—Ç—É, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç —É–¥–æ–±–Ω–æ."
        )

    # —Å—Ç–∞—Ä—Ç / –≤–≤–æ–¥–Ω–∞—è
    if any(k in t for k in ["–≤–≤–æ–¥–Ω", "–Ω–∞—á–∞—Ç—å", "—Å—Ç–∞—Ä—Ç", "–∫–∞–∫ –Ω–∞—á–∞—Ç—å"]):
        return S(
            "–ù–∞—á–Ω–∏—Ç–µ —Å –≤–≤–æ–¥–Ω–æ–π –ª–µ–∫—Ü–∏–∏: <–≤–≤–æ–¥–Ω–∞—è>.",
            "–®–∞–≥–∏ –Ω–∞ —Å—Ç–∞—Ä—Ç: 1) –≤–≤–æ–¥–Ω–∞—è <–≤–≤–æ–¥–Ω–∞—è>, 2) –∞–Ω–∫–µ—Ç–∞ <–∞–Ω–∫–µ—Ç–∞>, 3) –∫–æ—Ä–æ—Ç–∫–æ #–¢–æ—á–∫–∞–ê."
        )

    # –∞–Ω–∫–µ—Ç–∞
    if any(k in t for k in ["–∞–Ω–∫–µ—Ç–∞", "–∞–Ω–∫–µ—Ç—É", "–∞–Ω–∫–µ—Ç—ã", "—Ñ–æ—Ä–º–∞", "–∑–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç"]):
        return S(
            "–ê–Ω–∫–µ—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞: <–∞–Ω–∫–µ—Ç–∞> (3‚Äì5 –º–∏–Ω—É—Ç).",
            "–û—Ç–ø—Ä–∞–≤–ª—è—é —Å—Å—ã–ª–∫—É –Ω–∞ –∞–Ω–∫–µ—Ç—É: <–∞–Ω–∫–µ—Ç–∞>. –ï—Å–ª–∏ –Ω–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ."
        )

    # –ø—Ä–∞–≤–∏–ª–∞
    if any(k in t for k in ["–ø—Ä–∞–≤–∏–ª", "—Ä–µ–≥–ª–∞–º–µ–Ω—Ç", "—á—Ç–æ –º–æ–∂–Ω–æ", "–æ—Ñ—Ñ—Ç–æ–ø"]):
        return S(
            "–ü—Ä–∞–≤–∏–ª–∞ —á–∞—Ç–∞ —Ç—É—Ç: <–ø—Ä–∞–≤–∏–ª–∞>.",
            "–ö–æ—Ä–æ—Ç–∫–æ: –ø–æ –¥–µ–ª—É –∏ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ; —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —É—Å–ª—É–≥–∏/—Å–±–æ—Ä—ã ‚Äî –≤–Ω–µ —Ä–∞–±–æ—á–µ–≥–æ —á–∞—Ç–∞. –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è: <–ø—Ä–∞–≤–∏–ª–∞>."
        )

    # –≥—Ä–∞—Ñ–∏–∫/–≤—Å—Ç—Ä–µ—á–∏
    if any(k in t for k in ["–≤—Å—Ç—Ä–µ—á", "–∑–Ω–∞–∫–æ–º—Å—Ç–≤", "—Ä–∞—Å–ø–∏—Å–∞–Ω", "–≥—Ä–∞—Ñ–∏–∫", "–∑—É–º"]):
        return S(
            "–ë–ª–∏–∂–∞–π—à–∏–µ –≤—Å—Ç—Ä–µ—á–∏ ‚Äî –≤ –∑–∞–∫—Ä–µ–ø–µ/–∞–Ω–æ–Ω—Å–µ —á–∞—Ç–∞.",
            "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∞–Ω–æ–Ω—Å—ã –≤ —á–∞—Ç–µ ‚Äî —Ç–∞–º –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ."
        )

    # –≤–æ–ø—Ä–æ—Å—ã –ø–æ –ª–µ–∫—Ü–∏—è–º / –±–æ—Ç—É –ú–∞—à–µ
    if any(k in t for k in ["–≤–æ–ø—Ä–æ—Å", "–ª–µ–∫—Ü–∏", "–º–∞—Ç–µ—Ä–∏–∞–ª", "–ø–æ–Ω—è—Ç—å", "—Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è"]):
        return S(
            "–í–æ–ø—Ä–æ—Å—ã –ø–æ –ª–µ–∫—Ü–∏—è–º ‚Äî –≤ –±–æ—Ç–∞ –ú–∞—à–µ (—Å—Å—ã–ª–∫–∞ –≤ –∑–∞–∫—Ä–µ–ø–µ). –û—Ç–≤–µ—Ç–∏–º —Ç–æ—á–µ—á–Ω–æ.",
            "–û–ø–∏—à–∏—Ç–µ, –∫ –∫–∞–∫–æ–π –ª–µ–∫—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —è—Å–Ω–æ ‚Äî –ø–µ—Ä–µ–¥–∞–º –ú–∞—à–µ.",
            "–ú–æ–∂–µ–º —Å–æ–∑–≤–æ–Ω–∏—Ç—å—Å—è –Ω–∞ –≤—Å—Ç—Ä–µ—á–µ ¬´–≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç¬ª; –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–∏—à–∏—Ç–µ –≤ –±–æ—Ç–∞ –ú–∞—à–µ."
        )

    # –±–∞–∑–∞ –∑–∞—â–∏—Ç / –ø–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    if any(k in t for k in ["–±–∞–∑–∞ –∑–∞—â–∏—Ç", "–∑–∞—â–∏—Ç", "–ø–∞–∫–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç", "–ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ"]):
        return S(
            "–ë–∞–∑–∞ –∑–∞—â–∏—Ç –ø—Ä–æ—à–ª—ã—Ö –ø–æ—Ç–æ–∫–æ–≤: <–±–∞–∑–∞_–∑–∞—â–∏—Ç>. –†–µ–∫–æ–º–µ–Ω–¥—É—é 10‚Äì15 –ø–µ—Ä–µ–¥ —Å–≤–æ–µ–π.",
            "–°–Ω–∞—á–∞–ª–∞ —á–µ—Ä–Ω–æ–≤–∏–∫ –ø–∞–∫–µ—Ç–∞, –∑–∞—Ç–µ–º —Å–º–æ—Ç—Ä–∏–º –∑–∞—â–∏—Ç—ã –ø–æ –ø–æ—Ö–æ–∂–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º: <–±–∞–∑–∞_–∑–∞—â–∏—Ç>.",
            "–ì–æ—Ç–æ–≤ —á–µ—Ä–Ω–æ–≤–∏–∫? –ü—Ä–∏—Å—ã–ª–∞–π—Ç–µ ‚Äî –¥–∞–¥–∏–º –ø—Ä–∏—Ü–µ–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å."
        )

    # –∑–∞–ø–∏—Å—å –Ω–∞ –∑–∞—â–∏—Ç—É
    if any(k in t for k in ["–∑–∞–ø–∏—Å–∞—Ç—å", "—Å–ª–æ—Ç", "—Ç–∞–±–ª–∏—Ü", "—Ä–∞—Å–ø–∏—Å–∞–Ω–∏", "–∫–æ–≥–¥–∞ –∑–∞—â–∏—Ç–∞"]):
        return S(
            "–ó–∞–ø–∏—Å—å –Ω–∞ –∑–∞—â–∏—Ç—É ‚Äî –≤ —Ç–∞–±–ª–∏—Ü–µ (–∏–∑ –∑–∞–∫—Ä–µ–ø–∞). –õ—É—á—à–µ –∑–∞–Ω—è—Ç—å —Å–ª–æ—Ç –∑–∞—Ä–∞–Ω–µ–µ.",
            "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –º–æ–∂–Ω–æ –Ω–µ –ø–æ–∑–¥–Ω–µ–µ —á–µ–º –∑–∞ 10 –¥–Ω–µ–π –¥–æ –¥–∞—Ç—ã. –°—Å—ã–ª–∫—É –¥–∞–º –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.",
            "–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∏–º –∑–∞—Ä–∞–Ω–µ–µ: –ø–∞–∫–µ—Ç + —Å—Å—ã–ª–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ –º–∏–Ω–∏–º—É–º –∑–∞ 3 –¥–Ω—è."
        )

    # –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏—è / —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ
    if any(k in t for k in ["–∞—Ç—Ç–µ—Å—Ç", "—Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤", "–¥–æ–∫—É–º–µ–Ω—Ç –æ–± –æ–±—Ä–∞–∑–æ–≤–∞–Ω"]):
        return S(
            "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏–∏ ‚Äî –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ (–∏–∑ –∑–∞–∫—Ä–µ–ø–∞). –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–±—è –ø–æ —á–µ–∫-–ª–∏—Å—Ç—É.",
            "–ß—Ç–æ–±—ã –≤—ã–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç, –Ω—É–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—É–Ω–∫—Ç—ã. –ü—Ä–æ–≤–µ—Ä–∏–º –≤–º–µ—Å—Ç–µ.",
            "–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –¥–æ–±—Ä–∞–ª–∏, –ø–æ–¥—Å–∫–∞–∂—É, –∫–∞–∫ –∑–∞–∫—Ä—ã—Ç—å –±—ã—Å—Ç—Ä–æ."
        )

    # –ø—Ä–æ–¥–ª–µ–Ω–∏–µ
    if any(k in t for k in ["–ø—Ä–æ–¥–ª–µ–Ω", "–ø—Ä–æ–¥–ª–∏—Ç—å", "–µ—â—ë 6 –º–µ—Å—è—Ü"]):
        return S(
            "–î–∞, –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –Ω–∞ 6 –º–µ—Å—è—Ü–µ–≤ –¥–æ—Å—Ç—É–ø–Ω–æ. –°–æ–æ–±—â–∏–º –Ω–æ–≤—ã–µ —Å—Ä–æ–∫–∏ –∏ –¥–æ—Å—Ç—É–ø—ã.",
            "–ü–æ—Å–ª–µ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø –∫ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –∏ –∑–∞—â–∏—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è; –ª–µ–∫—Ü–∏–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ ‚Äî –¥–æ –∫–æ–Ω—Ü–∞ —Å—Ä–æ–∫–∞.",
            "–ü–æ–¥—Å–∫–∞–∂—É, –∫–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –∏ –∫–æ–≥–¥–∞ –ø–æ—è–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ —Å–ª–æ—Ç—ã."
        )

    # –º–æ–¥–µ—Ä–∞—Ü–∏—è/–æ—Ñ—Ñ—Ç–æ–ø/—Ä–µ–∫–ª–∞–º–∞
    if any(k in t for k in ["—Ä–µ–∫–ª–∞–º", "–¥–æ–Ω–∞—Ç", "—Å–±–æ—Ä", "—Å—Ç–æ—Ä–æ–Ω–Ω", "–æ—Ñ—Ñ—Ç–æ–ø"]):
        return S(
            "–í —Ä–∞–±–æ—á–µ–º —á–∞—Ç–µ –¥–µ—Ä–∂–∏–º—Å—è –≤ —Ç–µ–º–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã; —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–±–æ—Ä—ã ‚Äî –≤–Ω–µ —á–∞—Ç–∞.",
            "–¢–∞–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥–µ–º —É–¥–∞–ª—è—Ç—å –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º: <–ø—Ä–∞–≤–∏–ª–∞>.",
            "–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±—Å—É–¥–∏—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ ‚Äî –¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ –≤ –ª–∏—á–∫–µ –ø–æ –≤–∑–∞–∏–º–Ω–æ–º—É —Å–æ–≥–ª–∞—Å–∏—é."
        )

    # –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞/onstudy
    if any(k in t for k in ["onstudy", "–ø–ª–∞—Ç—Ñ–æ—Ä–º", "–ª–æ–≥–∏–Ω", "–¥–æ—Å—Ç—É–ø"]):
        return S(
            "–í—Å–µ –ª–µ–∫—Ü–∏–∏ ‚Äî –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ onstudy.org. –ï—Å–ª–∏ –Ω–µ –≤–∏–¥–∏—Ç–µ –∫—É—Ä—Å ‚Äî —Å–∫–∞–∂–∏—Ç–µ, –ø—Ä–æ–≤–µ—Ä–∏–º –¥–æ—Å—Ç—É–ø.",
            "–ó–∞–π–¥–∏—Ç–µ –Ω–∞ onstudy.org –ø–æ–¥ —Å–≤–æ–∏–º –ª–æ–≥–∏–Ω–æ–º. –î–∞–ª—å—à–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ –Ω–µ–¥–µ–ª—è–º.",
            "–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚Äî –ø—Ä–∏—à–ª–∏—Ç–µ —Å–∫—Ä–∏–Ω; —Ä–∞–∑–±–µ—Ä—ë–º—Å—è."
        )

    # –∫–Ω–∏–≥–∞ / —á—Ç–µ–Ω–∏–µ
    if any(k in t for k in ["–∫–Ω–∏–≥–∞", "—á–∏—Ç–∞—Ç—å", "1900"]):
        return S(
            "–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —á–∏—Ç–∞–µ–º ¬´–ò—Å–∫—É—Å—Å—Ç–≤–æ —Å 1900 –≥–æ–¥–∞¬ª.",
            "–ú–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –≤—ã–±–æ—Ä–æ—á–Ω–æ ‚Äî –ø–æ –±–ª–æ–∫–∞–º, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ª–µ–∫—Ü–∏—è–º–∏.",
            "–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –≥–ª–∞–≤–∞–º ‚Äî –ø–æ–¥—Å–∫–∞–∂—É."
        )

    # –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π
    if any(k in t for k in ["–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç", "–Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è", "–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞", "—Å–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è", "–æ—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞", "–ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º"]):
        return S(
            "üíª –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä.",
            "üíª –†–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–π—Ç–∏ —Å –¥—Ä—É–≥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã."
        )

    # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    return S(
        "–ü–æ–¥—Å–∫–∞–∂–∏—Ç–µ, –∫ –∫–∞–∫–æ–º—É –º–æ–¥—É–ª—é –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –≤–æ–ø—Ä–æ—Å? –ü–æ–º–æ–≥—É –±—ã—Å—Ç—Ä–æ —Å–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è.",
        "–î–∞–≤–∞–π—Ç–µ –ø–æ —à–∞–≥–∞–º: 1) –≤–≤–æ–¥–Ω–∞—è <–≤–≤–æ–¥–Ω–∞—è>, 2) –∞–Ω–∫–µ—Ç–∞ <–∞–Ω–∫–µ—Ç–∞>, 3) #–¢–æ—á–∫–∞–ê. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –ø—Ä–∏—à–ª—é —Å—Å—ã–ª–∫–∏.",
        "–ü–æ–ª–µ–∑–Ω–æ–µ –ø–æ —á–∞—Ç—É: <–ø—Ä–∞–≤–∏–ª–∞>, <–∞–Ω–∫–µ—Ç–∞>, <–≤–≤–æ–¥–Ω–∞—è>, <–±–∞–∑–∞_–∑–∞—â–∏—Ç>. –° —á–µ–≥–æ –Ω–∞—á–Ω—ë–º?"
    )
